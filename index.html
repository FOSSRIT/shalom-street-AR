<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title id='title'>AR App</title>

		<!--CSS-->
		<!--<link rel="stylesheet" type="text/css" href="styles.css" />-->

		<!--Modex.js Core Engine-->
		<!--Setup path variables (path to Modex.js folder from index)-->
		<script type="text/javascript">var _modPath = 'Modex.js'</script>
		<!--We preface our src with ../ because we're in the example folder and need to jump back one directory-->
		<script type="text/javascript" src="Modex.js/base/index.js" ></script>
		<script type="text/javascript" src="Modex.js/graphics/index.js" ></script>
		<script type="text/javascript" src="Modex.js/states/index.js" ></script>
		<script type="text/javascript" src="Modex.js/positioning/index.js" ></script>

		<!--Extensions we'll use-->
		<script type="text/javascript" src="Modex.js/extensions/extensionManager.js" ></script>
		<script type="text/javascript" src="Modex.js/extensions/touch.js" ></script>
		<script type="text/javascript" src="Modex.js/extensions/jsonLoader.js"></script>
		<script type="text/javascript" src="Modex.js/extensions/jsonBuilder.js"></script>


		<script type="text/javascript" src="AR_Backbone/MenuItem.js"></script>
		<script type="text/javascript" src="AR_Backbone/Browser.js"></script>
		<script type="text/javascript" src="AR_Backbone/Menu.js"></script>

		<!--Our modules and states-->

		<script>

			var app = { };
			var main;
			var templates = {};


			function onLoad(){


				//make our app's main repository of information.
				info = {}

				//Pass in our templates.
				info.templates = {};
				info.templates.menu_item_template = document.getElementById("menu_item_template");
				info.templates.menu_template = document.getElementById("menu_template");

				//Main
				info.main = document.getElementById("main");
				var canvas = document.getElementById('tempNeed');
				manager = Manager(canvas, canvas.getContext('2d'), 1);

				//var item = MenuItem(templates.menu_item_template, main, 5);
				var browser = Browser(info);

				//manager.addModule(item);

				//Grab the Canvas.
				/*
				bioSubmission = DomWrapper(document.getElementById("bioSubmitBox"));
				canvas = document.getElementById("main");
				ctx = canvas.getContext("2d");
				//Make the canvas full screen

				//Size the canvas as far as we can.
				var wantedHeightProp = window.innerHeight / 1080;
				var wantedWidthProp = window.innerWidth / 1920;
				var scale = (wantedHeightProp < wantedWidthProp)? wantedHeightProp : wantedWidthProp;

				canvas.style.height = 1080 * scale;
				canvas.style.width = 1920 * scale;

				//create and add elements
				console.log(1/scale);
				manager = Manager(canvas, ctx, 1/scale);
				

				manager.setLoad(function(){
					manager.draw();
				});
				
				
				//currentState = CurrentState(0, 0, 1920, 1080);
				currentState = StateManager(SplashScreen({"superhero":superhero}));
				manager.addModule(currentState);
				*/

			}

		window.onload = onLoad;



		function resizeIFrame(id){
			var newheight=document.getElementById(id).contentWindow.postMessage('sizing?', '*');

		    //var newwidth=document.getElementById(id).contentWindow.document .body.scrollWidth;

		   
		  	//document.getElementById(id).style.getElementById(id).width= (newwidth) + "px";
		}

		handleSizingResponse = function(e) {
		  	document.getElementById('me').style.height= e.data;
		  	console.log(e.data);
		}

		window.addEventListener('message', handleSizingResponse, false);

		</script>



		<style>

			body {
				overflow-right:hidden;
				overflow-left:hidden;
			}

			iframe {
				border:none;
				width:100%;
			}

			.menu {
				width:500px;
				height:700px;
				background-color:green;
			}

			.menu .title {
				width:100%;
				height:100px;
				background-color:gray;
			}

			.menu .title .title_tag {
				float:left;
				font-size:15pt;
			}

			.menu .title .camera_tag {
				float:right;
				width:150px;
				height:150px;
				background-color:red;
			}
		</style>
	</head>




	<!--Main app-->
	<body>
		<!--Canvas is width and height of the screen.-->
		<!--We'll need to set this stuff up so it goes full screen I guess.-->
		
		<!--<textarea id="bioSubmitBox" style="resize: none; visibility:hidden; position:absolute; left:10px; top:10px; width:400px; height:400px">Enter your superhero's bio here!</textarea> -->
		<canvas id="tempNeed" width="100px" height="100px" style="display:none;"></canvas>
		<div id="main">

		<iframe id="me" src="Data/2014-2015/myContent.html" onLoad="resizeIFrame('me')"></iframe>
			

		</div>

		<div id="templates" style="display:none;">

			<!--Menu-->
				<!-- Menu -->
				<div id="menu_template" class="menu">
					<!--Upper bar-->
					<div class="title">
						<!--Required field-->
						<div class="title_tag">A title will go here.</div> 
						<!--Required filed-->
						<div class="camera_tag"></div>
					</div>

				</div>

				<!-- Menu Items -->
				<div id="menu_item_template" class="menu_item">
					<span>Hello hello hello!  </span><br>
					<span>What's up?</span>
				</div>

			<!--Browser-->


		</div>
	</body>

</html>